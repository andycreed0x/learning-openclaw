<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Canales y Multi-Plataforma - Learning OpenClaw</title>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/reveal.js@5.1.0/dist/reset.css">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/reveal.js@5.1.0/dist/reveal.css">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/reveal.js@5.1.0/dist/theme/black.css">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/reveal.js@5.1.0/plugin/highlight/monokai.css">
  <link rel="stylesheet" href="../assets/custom.css">
</head>
<body>
  <div class="reveal">
    <div class="slides">

      <!-- Slide 1: Portada -->
      <section>
        <span class="session-badge">Sesi&oacute;n 3 de 6</span>
        <h1>Canales y Multi-Plataforma</h1>
        <p>Conectando OpenClaw con el mundo</p>
        <p class="small">Un asistente, todas las plataformas</p>
        <aside class="notes">
          Bienvenidos a la Sesi&oacute;n 3. Hoy exploramos c&oacute;mo OpenClaw se conecta a plataformas
          de mensajer&iacute;a a trav&eacute;s de su capa de abstracci&oacute;n de canales. Al final,
          entender&aacute;n c&oacute;mo configurar canales, controlar el acceso con pol&iacute;ticas de MD
          y enrutar mensajes al agente correcto.
        </aside>
      </section>

      <!-- Slide 2: Qu&eacute; son los Canales -->
      <section>
        <h2>&iquest;Qu&eacute; son los Canales?</h2>
        <div class="highlight-box info">
          <strong>Canal</strong> = un conector de plataforma de mensajer&iacute;a que traduce
          mensajes espec&iacute;ficos de cada plataforma al formato interno de OpenClaw.
        </div>
        <ul>
          <li class="fragment">Cada canal maneja una conexi&oacute;n a una plataforma</li>
          <li class="fragment">Normaliza los mensajes en un <span class="cyan">formato unificado</span></li>
          <li class="fragment">Gestiona la autenticaci&oacute;n con APIs externas</li>
          <li class="fragment">Maneja caracter&iacute;sticas espec&iacute;ficas de la plataforma (reacciones, hilos, botones)</li>
        </ul>
        <aside class="notes">
          Los canales son el puente entre las plataformas de mensajer&iacute;a externas y el n&uacute;cleo
          de OpenClaw. Abstraen todos los detalles espec&iacute;ficos de cada plataforma para que el
          resto del sistema solo tenga que lidiar con un formato de mensaje unificado.
        </aside>
      </section>

      <!-- Slide 3: 13+ Plataformas Soportadas -->
      <section>
        <h2>13+ Plataformas Soportadas</h2>
        <table>
          <thead>
            <tr>
              <th>Plataforma</th>
              <th>Librer&iacute;a / Protocolo</th>
              <th>Estado</th>
            </tr>
          </thead>
          <tbody>
            <tr class="fragment"><td>WhatsApp</td><td>Baileys</td><td class="green">Estable</td></tr>
            <tr class="fragment"><td>Telegram</td><td>Grammy</td><td class="green">Estable</td></tr>
            <tr class="fragment"><td>Discord</td><td>discord.js</td><td class="green">Estable</td></tr>
            <tr class="fragment"><td>Slack</td><td>Bolt</td><td class="green">Estable</td></tr>
            <tr class="fragment"><td>Web Chat</td><td>Integrado</td><td class="green">Estable</td></tr>
            <tr class="fragment"><td>Matrix</td><td>matrix-js-sdk</td><td class="green">Estable</td></tr>
            <tr class="fragment"><td>Signal</td><td>signal-cli</td><td class="yellow">Beta</td></tr>
            <tr class="fragment"><td>IRC</td><td>irc-framework</td><td class="green">Estable</td></tr>
            <tr class="fragment"><td>XMPP</td><td>stanza.io</td><td class="green">Estable</td></tr>
            <tr class="fragment"><td>Nostr</td><td>nostr-tools</td><td class="yellow">Beta</td></tr>
            <tr class="fragment"><td>SMS</td><td>Twilio</td><td class="green">Estable</td></tr>
            <tr class="fragment"><td>Line</td><td>LINE SDK</td><td class="green">Estable</td></tr>
            <tr class="fragment"><td>Personalizado</td><td>Webhook</td><td class="green">Estable</td></tr>
          </tbody>
        </table>
        <aside class="notes">
          OpenClaw soporta m&aacute;s de 13 plataformas de mensajer&iacute;a de forma nativa. Cada una
          utiliza una librer&iacute;a o protocolo bien mantenido. Algunos canales m&aacute;s nuevos como
          Signal y Nostr a&uacute;n est&aacute;n en beta pero son completamente funcionales. El canal
          de webhook personalizado permite integrarse con cualquier plataforma que pueda
          enviar solicitudes HTTP.
        </aside>
      </section>

      <!-- Slide 4: Arquitectura de Canales -->
      <section>
        <h2>Arquitectura de Canales</h2>
        <div class="mermaid">
graph LR
    subgraph "Dispositivos del Usuario"
        WA["ðŸ“± WhatsApp"]
        TG["ðŸ“± Telegram"]
        DC["ðŸ’¬ Discord"]
        WB["ðŸŒ Navegador"]
    end
    subgraph "Nodo"
        CH1["Canal WA"]
        CH2["Canal TG"]
        CH3["Canal DC"]
        CH4["Canal Web"]
    end
    subgraph "Gateway"
        RT["Enrutador"]
    end
    WA --> CH1
    TG --> CH2
    DC --> CH3
    WB --> CH4
    CH1 --> RT
    CH2 --> RT
    CH3 --> RT
    CH4 --> RT
        </div>
        <p class="small fragment">Todos los canales alimentan un &uacute;nico enrutador que despacha al agente correcto.</p>
        <aside class="notes">
          Este diagrama muestra c&oacute;mo fluyen los mensajes desde los dispositivos del usuario,
          a trav&eacute;s de canales espec&iacute;ficos de cada plataforma, hasta el enrutador central.
          El enrutador es responsable de decidir qu&eacute; agente debe manejar cada mensaje.
          N&oacute;tese que cada canal se ejecuta de forma independiente; si uno falla,
          los dem&aacute;s siguen funcionando.
        </aside>
      </section>

      <!-- Slide 5: Ejemplo de Configuraci&oacute;n de Canal -->
      <section>
        <h2>Configuraci&oacute;n de Canal</h2>
        <p>Definida en el <span class="cyan">archivo de configuraci&oacute;n</span> de tu nodo:</p>
        <pre><code class="language-json5" data-trim>
{
  channels: {
    "mi-telegram": {
      type: "telegram",
      botToken: "$TELEGRAM_BOT_TOKEN",
      dmPolicy: "pairing"
    },
    "mi-discord": {
      type: "discord",
      botToken: "$DISCORD_BOT_TOKEN",
      dmPolicy: "allowlist"
    },
    "interfaz-web": {
      type: "web",
      port: 3100,
      dmPolicy: "open"
    }
  }
}
        </code></pre>
        <div class="highlight-box warning fragment">
          <strong>Consejo:</strong> Usa variables de entorno (<code>$VAR</code>) para los secretos &mdash; nunca escribas tokens directamente en el archivo.
        </div>
        <aside class="notes">
          La configuraci&oacute;n de canales vive en el archivo JSON5 de configuraci&oacute;n de tu nodo.
          Cada canal tiene un nombre &uacute;nico, un tipo y configuraciones espec&iacute;ficas de la
          plataforma. Observa c&oacute;mo los secretos se referencian mediante variables de entorno.
          La configuraci&oacute;n de dmPolicy controla qui&eacute;n puede enviar mensajes directos al bot.
        </aside>
      </section>

      <!-- Slide 6: Pol&iacute;ticas de MD -->
      <section>
        <h2>Pol&iacute;ticas de Mensajes Directos</h2>
        <p>Controla qui&eacute;n puede enviar mensajes privados a tu asistente</p>
        <table>
          <thead>
            <tr>
              <th>Pol&iacute;tica</th>
              <th>Comportamiento</th>
              <th>Ideal Para</th>
            </tr>
          </thead>
          <tbody>
            <tr class="fragment">
              <td class="cyan">pairing</td>
              <td>El usuario debe ingresar un c&oacute;digo de verificaci&oacute;n</td>
              <td>Uso personal, familias</td>
            </tr>
            <tr class="fragment">
              <td class="green">allowlist</td>
              <td>Solo IDs de usuario pre-aprobados pueden enviar MD</td>
              <td>Equipos, organizaciones</td>
            </tr>
            <tr class="fragment">
              <td class="yellow">open</td>
              <td>Cualquiera puede enviar MD al bot</td>
              <td>Bots p&uacute;blicos, demos</td>
            </tr>
            <tr class="fragment">
              <td class="red">disabled</td>
              <td>No se permiten mensajes directos</td>
              <td>Bots solo para grupos</td>
            </tr>
          </tbody>
        </table>
        <div class="highlight-box success fragment">
          <strong>Recomendaci&oacute;n:</strong> Comienza con <code>pairing</code> para uso personal.
          Ofrece buena seguridad con una experiencia de usuario sencilla.
        </div>
        <aside class="notes">
          Las pol&iacute;ticas de MD son una caracter&iacute;stica clave de seguridad. Pairing es el
          valor por defecto recomendado: los usuarios reciben un c&oacute;digo &uacute;nico que deben
          ingresar en el chat para demostrar que tienen acceso al panel de OpenClaw.
          Allowlist es &uacute;til para equipos donde conoces el ID de cada usuario en la
          plataforma. Open solo deber&iacute;a usarse para bots de cara al p&uacute;blico.
        </aside>
      </section>

      <!-- Slide 7: Enrutamiento Multi-Agente -->
      <section>
        <h2>Enrutamiento Multi-Agente</h2>
        <p class="medium">&iquest;C&oacute;mo decide OpenClaw qu&eacute; agente maneja un mensaje?</p>
        <div class="mermaid">
graph TB
    MSG["Mensaje Entrante"] --> P1{"Prioridad 1: Coincidencia Exacta"}
    P1 -->|"Coincide"| A1["Agente A"]
    P1 -->|"No coincide"| P2{"Prioridad 2: Canal por Defecto"}
    P2 -->|"Coincide"| A2["Agente B"]
    P2 -->|"No coincide"| P3{"Prioridad 3: Global por Defecto"}
    P3 --> A3["Agente de Respaldo"]
        </div>
        <ul class="small fragment">
          <li><strong>Coincidencia Exacta:</strong> Canal + usuario/grupo mapeado a un agente espec&iacute;fico</li>
          <li><strong>Canal por Defecto:</strong> Agente por defecto para ese canal</li>
          <li><strong>Global por Defecto:</strong> Agente de respaldo a nivel del sistema</li>
        </ul>
        <aside class="notes">
          El sistema de enrutamiento usa una cadena de prioridad. Primero verifica si hay
          un mapeo directo para ese canal y usuario o grupo espec&iacute;fico. Si no, recurre
          al agente por defecto del canal. Finalmente, si nada coincide, el agente global
          por defecto maneja el mensaje. Esto permite tener diferentes agentes para
          diferentes contextos sin configuraci&oacute;n compleja.
        </aside>
      </section>

      <!-- Slide 8: Soporte de Chat Grupal -->
      <section>
        <h2>Soporte de Chat Grupal</h2>
        <div class="columns">
          <div class="col">
            <h3>C&oacute;mo Funcionan los Grupos</h3>
            <ul>
              <li class="fragment">El bot se une como miembro del grupo</li>
              <li class="fragment">Escucha <span class="cyan">@menciones</span> o palabras clave de activaci&oacute;n</li>
              <li class="fragment">Se puede configurar para escuchar <span class="yellow">todos los mensajes</span> o solo cuando se le menciona</li>
              <li class="fragment">El contexto del grupo se comparte entre los miembros</li>
            </ul>
          </div>
          <div class="col">
            <h3>Modos de Activaci&oacute;n</h3>
            <div class="highlight-box info fragment">
              <strong>@menci&oacute;n:</strong> Solo responde cuando se le menciona por nombre
            </div>
            <div class="highlight-box success fragment">
              <strong>palabra clave:</strong> Responde a palabras de activaci&oacute;n configuradas
            </div>
            <div class="highlight-box warning fragment">
              <strong>siempre:</strong> Responde a cada mensaje en el grupo
            </div>
          </div>
        </div>
        <aside class="notes">
          El soporte de chat grupal var&iacute;a seg&uacute;n la plataforma, pero los conceptos son
          los mismos. La mayor&iacute;a de usuarios prefieren el modo @menci&oacute;n para que el bot
          no interrumpa las conversaciones normales del grupo. El modo de palabra clave
          es &uacute;til para crear bots de soporte que se activan con frases como
          &quot;ayuda&quot; o &quot;pregunta&quot;.
        </aside>
      </section>

      <!-- Slide 9: Soporte de Medios -->
      <section>
        <h2>Soporte de Medios por Canal</h2>
        <table>
          <thead>
            <tr>
              <th>Canal</th>
              <th>Im&aacute;genes</th>
              <th>Audio</th>
              <th>Archivos</th>
              <th>Botones</th>
              <th>Reacciones</th>
            </tr>
          </thead>
          <tbody>
            <tr class="fragment">
              <td>WhatsApp</td>
              <td class="green">S&iacute;</td>
              <td class="green">S&iacute;</td>
              <td class="green">S&iacute;</td>
              <td class="green">S&iacute;</td>
              <td class="green">S&iacute;</td>
            </tr>
            <tr class="fragment">
              <td>Telegram</td>
              <td class="green">S&iacute;</td>
              <td class="green">S&iacute;</td>
              <td class="green">S&iacute;</td>
              <td class="green">S&iacute;</td>
              <td class="green">S&iacute;</td>
            </tr>
            <tr class="fragment">
              <td>Discord</td>
              <td class="green">S&iacute;</td>
              <td class="green">S&iacute;</td>
              <td class="green">S&iacute;</td>
              <td class="green">S&iacute;</td>
              <td class="green">S&iacute;</td>
            </tr>
            <tr class="fragment">
              <td>Slack</td>
              <td class="green">S&iacute;</td>
              <td class="green">S&iacute;</td>
              <td class="green">S&iacute;</td>
              <td class="green">S&iacute;</td>
              <td class="green">S&iacute;</td>
            </tr>
            <tr class="fragment">
              <td>Web Chat</td>
              <td class="green">S&iacute;</td>
              <td class="yellow">Parcial</td>
              <td class="green">S&iacute;</td>
              <td class="green">S&iacute;</td>
              <td class="red">No</td>
            </tr>
            <tr class="fragment">
              <td>IRC</td>
              <td class="red">No</td>
              <td class="red">No</td>
              <td class="red">No</td>
              <td class="red">No</td>
              <td class="red">No</td>
            </tr>
            <tr class="fragment">
              <td>SMS</td>
              <td class="green">S&iacute;</td>
              <td class="red">No</td>
              <td class="red">No</td>
              <td class="red">No</td>
              <td class="red">No</td>
            </tr>
          </tbody>
        </table>
        <p class="small fragment">OpenClaw degrada elegantemente cuando una plataforma no soporta una caracter&iacute;stica.</p>
        <aside class="notes">
          No todas las plataformas soportan los mismos tipos de medios. OpenClaw maneja
          esto de forma elegante: si un agente intenta enviar un bot&oacute;n a IRC, recurrir&aacute;
          a un men&uacute; basado en texto. Las im&aacute;genes enviadas por SMS usan MMS. Lo importante
          es que el c&oacute;digo de tu agente no necesita preocuparse por las diferencias
          entre plataformas.
        </aside>
      </section>

      <!-- Slide 10: Canal Web en Detalle -->
      <section>
        <h2>Canal Web en Detalle</h2>
        <div class="columns">
          <div class="col">
            <h3>Caracter&iacute;sticas</h3>
            <ul>
              <li class="fragment">Interfaz web integrada &mdash; sin cuentas externas necesarias</li>
              <li class="fragment">Tema y marca personalizables</li>
              <li class="fragment">Soporta renderizado de markdown</li>
              <li class="fragment">Subida de archivos y visualizaci&oacute;n de im&aacute;genes</li>
              <li class="fragment">Embebible mediante iframe</li>
            </ul>
          </div>
          <div class="col">
            <h3>Configuraci&oacute;n</h3>
            <pre class="fragment"><code class="language-json5" data-trim>
{
  "interfaz-web": {
    type: "web",
    port: 3100,
    title: "Mi Asistente",
    theme: "dark",
    dmPolicy: "pairing"
  }
}
            </code></pre>
          </div>
        </div>
        <div class="highlight-box info fragment">
          <strong>Inicio R&aacute;pido:</strong> El canal web es la forma m&aacute;s f&aacute;cil de empezar.
          Sin claves de API, sin registro de bots &mdash; solo configura un puerto y listo.
        </div>
        <aside class="notes">
          El canal web es frecuentemente el primero que los usuarios configuran porque
          requiere cero configuraci&oacute;n externa. Solo elige un puerto, inicia el nodo y
          abre tu navegador. Tambi&eacute;n es excelente para embeber en aplicaciones web
          existentes. La interfaz es responsiva y funciona en dispositivos m&oacute;viles.
        </aside>
      </section>

      <!-- Slide 11: Conclusiones Clave -->
      <section>
        <h2>Conclusiones Clave</h2>
        <div class="highlight-box success fragment">
          <strong>1. Los canales abstraen la complejidad de las plataformas</strong><br>
          Escribe la l&oacute;gica del agente una vez, desp&aacute;chala a 13+ plataformas sin cambios.
        </div>
        <div class="highlight-box info fragment">
          <strong>2. Las pol&iacute;ticas de MD controlan el acceso</strong><br>
          Elige entre pairing, allowlist, open o disabled seg&uacute;n tus necesidades de seguridad.
        </div>
        <div class="highlight-box warning fragment">
          <strong>3. El enrutamiento determina qu&eacute; agente responde</strong><br>
          Cadena de prioridad: coincidencia exacta &rarr; canal por defecto &rarr; global por defecto.
        </div>
        <aside class="notes">
          Tres cosas para recordar de esta sesi&oacute;n: Los canales manejan todas las
          diferencias entre plataformas para que solo escribas la l&oacute;gica del agente una vez.
          Las pol&iacute;ticas de MD son tu primera l&iacute;nea de control de acceso. Y el enrutamiento
          te permite dirigir mensajes al agente correcto autom&aacute;ticamente. En la pr&oacute;xima
          sesi&oacute;n exploraremos los agentes en profundidad.
        </aside>
      </section>

      <!-- Slide 12: Recursos -->
      <section>
        <h2>Recursos</h2>
        <ul>
          <li><a href="https://openclaw.com/docs/channels">Documentaci&oacute;n de Configuraci&oacute;n de Canales</a></li>
          <li><a href="https://openclaw.com/docs/channels/web">Referencia del Canal Web</a></li>
          <li><a href="https://openclaw.com/docs/channels/telegram">Gu&iacute;a del Canal de Telegram</a></li>
          <li><a href="https://openclaw.com/docs/channels/whatsapp">Gu&iacute;a del Canal de WhatsApp</a></li>
          <li><a href="https://openclaw.com/docs/routing">Documentaci&oacute;n de Enrutamiento de Mensajes</a></li>
          <li><a href="https://openclaw.com/docs/dm-policies">Referencia de Pol&iacute;ticas de MD</a></li>
        </ul>
        <div class="highlight-box info">
          <strong>Pr&oacute;xima sesi&oacute;n:</strong> Agentes, Memoria y Sesiones &mdash; c&oacute;mo construir
          personalidades de IA con memoria persistente.
        </div>
        <aside class="notes">
          Aqu&iacute; est&aacute;n los enlaces de documentaci&oacute;n relevantes para lectura adicional.
          La pr&oacute;xima sesi&oacute;n cubre los agentes, que es donde sucede la verdadera magia:
          configuraci&oacute;n de personalidad, gesti&oacute;n de memoria y ciclo de vida de sesiones.
        </aside>
      </section>

    </div>
  </div>
  <div class="nav-footer">
    <a href="index.html">&larr; Tabla de Contenidos</a> &middot; Sesi&oacute;n 3 de 6
  </div>
  <script src="https://cdn.jsdelivr.net/npm/reveal.js@5.1.0/dist/reveal.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/reveal.js@5.1.0/plugin/highlight/highlight.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/reveal.js@5.1.0/plugin/notes/notes.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/reveal.js@5.1.0/plugin/zoom/zoom.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/mermaid@11/dist/mermaid.min.js"></script>
  <script>
    mermaid.initialize({ startOnLoad: false, theme: 'dark' });
    Reveal.initialize({
      hash: true,
      slideNumber: true,
      width: 1280,
      height: 720,
      margin: 0.04,
      minScale: 0.2,
      maxScale: 2.0,
      plugins: [RevealHighlight, RevealNotes, RevealZoom],
    }).then(() => {
      mermaid.run({ querySelector: '.mermaid' });
      Reveal.on('slidechanged', () => { mermaid.run({ querySelector: '.mermaid' }); });
    });
  </script>
</body>
</html>
